<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Tab Navigation -->
<div th:fragment="profile-tab-navigation" class="nav nav-tabs" id="profileTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="essential-tab" data-bs-toggle="tab" data-bs-target="#essential" type="button" role="tab">
            <i class="bi bi-person-check me-2"></i>기본 프로필
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="personality-tab" data-bs-toggle="tab" data-bs-target="#personality" type="button" role="tab">
            <i class="bi bi-heart me-2"></i>성격/취향
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="hidden-tab" data-bs-toggle="tab" data-bs-target="#hidden" type="button" role="tab">
            <i class="bi bi-lock me-2"></i>히든 프로필
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="activity-tab" data-bs-toggle="tab" data-bs-target="#activity" type="button" role="tab">
            <i class="bi bi-activity me-2"></i>활동 정보
        </button>
    </li>
</div>

<!-- Essential Profile Tab -->
<div th:fragment="essential-profile-tab" class="tab-pane fade show active" id="essential" role="tabpanel">
    <div class="profile-section essential">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="fw-bold mb-0 text-success">
                <i class="bi bi-person-check me-2"></i>기본 프로필 (Essential)
            </h6>
            <span class="completion-badge" th:classappend="${member.profile.essentialCompleted} ? 'completion-complete' : 'completion-incomplete'">
                <i class="bi" th:classappend="${member.profile.essentialCompleted} ? 'bi-check-circle' : 'bi-x-circle'"></i>
                <span th:text="${member.profile.essentialCompleted} ? '완료' : '미완료'">완료</span>
            </span>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="profile-item">
                    <span class="profile-label">코드네임</span>
                    <span class="profile-value" th:text="${member.profile.codeName ?: '미설정'}">홍길동</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">생년월일</span>
                    <span class="profile-value" th:text="${member.profile.birthDate != null ? #temporals.format(member.profile.birthDate, 'yyyy년 MM월 dd일') : '미설정'}">1999년 01월 15일</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">나이</span>
                    <span class="profile-value" th:text="${member.profile.birthDate != null ? member.profile.getAge() + '세' : '미설정'}">25세</span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="profile-item">
                    <span class="profile-label">시/도</span>
                    <span class="profile-value" th:text="${member.profile.bigCity ?: '미설정'}">서울특별시</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">시/군/구</span>
                    <span class="profile-value" th:text="${member.profile.smallCity ?: '미설정'}">강남구</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">직업</span>
                    <span class="profile-value" th:text="${member.profile.job ?: '미설정'}">개발자</span>
                </div>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.interests != null}">
            <div class="profile-label mb-2">관심사</div>
            <div class="tag-list">
                <span class="tag-item" th:each="interest : ${member.profile.getInterestsList()}" th:text="${interest}">개발</span>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.essentialCompletedAt != null}">
            <small class="text-muted">
                <i class="bi bi-clock me-1"></i>
                완료일: <span th:text="${#temporals.format(member.profile.essentialCompletedAt, 'yyyy-MM-dd HH:mm')}">2024-01-15 14:30</span>
            </small>
        </div>
    </div>
</div>

<!-- Personality Profile Tab -->
<div th:fragment="personality-profile-tab" class="tab-pane fade" id="personality" role="tabpanel">
    <div class="profile-section personality">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="fw-bold mb-0 text-info">
                <i class="bi bi-heart me-2"></i>성격/취향 프로필 (Personality)
            </h6>
            <span class="completion-badge" th:classappend="${member.profile.personalityCompleted} ? 'completion-complete' : 'completion-incomplete'">
                <i class="bi" th:classappend="${member.profile.personalityCompleted} ? 'bi-check-circle' : 'bi-x-circle'"></i>
                <span th:text="${member.profile.personalityCompleted} ? '완료' : '미완료'">미완료</span>
            </span>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="profile-item">
                    <span class="profile-label">헤어 길이</span>
                    <span class="profile-value" th:text="${member.profile.hairLength ?: '미설정'}">단발</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">체형</span>
                    <span class="profile-value" th:text="${member.profile.bodyType ?: '미설정'}">보통</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">키</span>
                    <span class="profile-value" th:text="${member.profile.height != null ? member.profile.height + 'cm' : '미설정'}">170cm</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">MBTI</span>
                    <span class="profile-value" th:text="${member.profile.mbti ?: '미설정'}">ENFP</span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="profile-item">
                    <span class="profile-label">음주</span>
                    <span class="profile-value" th:text="${member.profile.alcohol ?: '미설정'}">가끔</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">흡연</span>
                    <span class="profile-value" th:text="${member.profile.smoke ?: '미설정'}">안함</span>
                </div>
                <!-- 대표 질문: 엔티티가 아닌 경우 접근 문제 방지 위해 안전하게 처리하거나 숨김 -->
                <div class="profile-item" th:if="${member.profile.representativeAnswer != null}">
                    <span class="profile-label">대표 질문</span>
                    <span class="profile-value">응답 있음</span>
                </div>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.style != null}">
            <div class="profile-label mb-2">스타일</div>
            <div class="tag-list">
                <span class="tag-item" th:each="style : ${member.profile.getStylesList()}" th:text="${style}">캐주얼</span>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.personalities != null}">
            <div class="profile-label mb-2">성격</div>
            <div class="tag-list">
                <span class="tag-item" th:each="personality : ${member.profile.getPersonalitiesList()}" th:text="${personality}">외향적</span>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.representativeAnswer != null}">
            <div class="profile-label mb-2">대표 답변</div>
            <div class="p-3 bg-light rounded-3">
                <p class="mb-0" th:text="${member.profile.representativeAnswer}">대표 답변 내용</p>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.personalityCompletedAt != null}">
            <small class="text-muted">
                <i class="bi bi-clock me-1"></i>
                완료일: <span th:text="${#temporals.format(member.profile.personalityCompletedAt, 'yyyy-MM-dd HH:mm')}">2024-01-15 14:30</span>
            </small>
        </div>
    </div>
</div>

<!-- Hidden Profile Tab -->
<div th:fragment="hidden-profile-tab" class="tab-pane fade" id="hidden" role="tabpanel">
    <div class="profile-section hidden">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="fw-bold mb-0 text-warning">
                <i class="bi bi-lock me-2"></i>히든 프로필 (Hidden)
            </h6>
            <span class="completion-badge" th:classappend="${member.profile.hiddenCompleted} ? 'completion-complete' : 'completion-incomplete'">
                <i class="bi" th:classappend="${member.profile.hiddenCompleted} ? 'bi-check-circle' : 'bi-x-circle'"></i>
                <span th:text="${member.profile.hiddenCompleted} ? '완료' : '미완료'">미완료</span>
            </span>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="profile-item">
                    <span class="profile-label">사랑의 언어</span>
                    <span class="profile-value" th:text="${member.profile.loveLanguage ?: '미설정'}">신체 접촉</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">애정 표현 스타일</span>
                    <span class="profile-value" th:text="${member.profile.affectionStyle ?: '미설정'}">직접적</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">연락 스타일</span>
                    <span class="profile-value" th:text="${member.profile.contactStyle ?: '미설정'}">자주</span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="profile-item">
                    <span class="profile-label">데이트 스타일</span>
                    <span class="profile-value" th:text="${member.profile.dateStyle ?: '미설정'}">실내</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">갈등 해결 스타일</span>
                    <span class="profile-value" th:text="${member.profile.conflictResolutionStyle ?: '미설정'}">대화</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">연애 가치관</span>
                    <span class="profile-value" th:text="${member.profile.relationshipValues ?: '미설정'}">진지한 관계</span>
                </div>
            </div>
        </div>

        <div class="mt-3" th:if="${member.profile.hiddenCompletedAt != null}">
            <small class="text-muted">
                <i class="bi bi-clock me-1"></i>
                완료일: <span th:text="${#temporals.format(member.profile.hiddenCompletedAt, 'yyyy-MM-dd HH:mm')}">2024-01-15 14:30</span>
            </small>
        </div>
    </div>
</div>

<!-- Activity Profile Tab -->
<div th:fragment="activity-profile-tab" class="tab-pane fade" id="activity" role="tabpanel">
    <div class="row">
        <div class="col-md-6">
            <h6 class="fw-bold mb-3 text-primary">계정 정보</h6>
            <div class="profile-item">
                <span class="profile-label">이메일</span>
                <span class="profile-value" th:text="${member.email}">user@example.com</span>
            </div>
            <div class="profile-item">
                <span class="profile-label">OAuth 타입</span>
                <span class="profile-value">
                    <span class="badge bg-secondary" th:text="${member.oauthType}">KAKAO</span>
                </span>
            </div>
            <div class="profile-item">
                <span class="profile-label">OAuth ID</span>
                <span class="profile-value font-monospace" th:text="${member.oauthId}">123456789</span>
            </div>
            <div class="profile-item">
                <span class="profile-label">가입일</span>
                <span class="profile-value" th:text="${#temporals.format(member.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01 10:00</span>
            </div>
            <div class="profile-item">
                <span class="profile-label">정보 수정일</span>
                <span class="profile-value" th:text="${#temporals.format(member.updatedAt, 'yyyy-MM-dd HH:mm')}">2024-01-15 14:30</span>
            </div>
        </div>

        <div class="col-md-6">
            <h6 class="fw-bold mb-3 text-primary">자기소개</h6>
            <div class="p-3 bg-light rounded-3 mb-4" th:if="${member.profile.introduce != null}">
                <p class="mb-0" th:text="${member.profile.introduce}">안녕하세요! 개발을 좋아하는 개발자입니다.</p>
            </div>
            <div th:unless="${member.profile.introduce != null}" class="text-center py-3 text-muted">
                <i class="bi bi-chat-quote text-muted" style="font-size: 2rem;"></i>
                <p class="mt-2 mb-0">자기소개가 없습니다.</p>
            </div>

            <h6 class="fw-bold mb-3 text-primary">프로필 완성 현황</h6>
            <div class="row g-3">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center p-3 border rounded">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-person-check text-success me-2"></i>
                            <span>기본 프로필</span>
                        </div>
                        <span class="completion-badge" th:classappend="${member.profile.essentialCompleted} ? 'completion-complete' : 'completion-incomplete'">
                            <i class="bi" th:classappend="${member.profile.essentialCompleted} ? 'bi-check-circle' : 'bi-x-circle'"></i>
                            <span th:text="${member.profile.essentialCompleted} ? '완료' : '미완료'">완료</span>
                        </span>
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center p-3 border rounded">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-heart text-info me-2"></i>
                            <span>성격/취향</span>
                        </div>
                        <span class="completion-badge" th:classappend="${member.profile.personalityCompleted} ? 'completion-complete' : 'completion-incomplete'">
                            <i class="bi" th:classappend="${member.profile.personalityCompleted} ? 'bi-check-circle' : 'bi-x-circle'"></i>
                            <span th:text="${member.profile.personalityCompleted} ? '완료' : '미완료'">미완료</span>
                        </span>
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center p-3 border rounded">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-lock text-warning me-2"></i>
                            <span>히든 프로필</span>
                        </div>
                        <span class="completion-badge" th:classappend="${member.profile.hiddenCompleted} ? 'completion-complete' : 'completion-incomplete'">
                            <i class="bi" th:classappend="${member.profile.hiddenCompleted} ? 'bi-check-circle' : 'bi-x-circle'"></i>
                            <span th:text="${member.profile.hiddenCompleted} ? '완료' : '미완료'">미완료</span>
                        </span>
                    </div>
                </div>
            </div>
        </div> <!-- /col -->
    </div> <!-- /row -->
</div>

</body>
</html>
